{% extends 'base.html' %}
{% load static %}
{% block extra_css %}
<link rel="stylesheet" href="{% static 'godown/css/godown.css' %}">
{% endblock %}
{% block content %}
<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-md-10">
      <!-- Data Audit Reminder Banner -->
      {% if audit_reminder.show_reminder %}
      <div class="alert alert-warning alert-dismissible fade show mb-4" role="alert" id="auditReminderBanner">
        <div class="row align-items-center">
          <div class="col-md-8">
            <h5 class="alert-heading mb-2">
              <i class="fas fa-calendar-check me-2"></i>Monthly Data Audit Reminder
            </h5>
            <p class="mb-2">
              <strong>{{ audit_reminder.days_remaining }} day{{ audit_reminder.days_remaining|pluralize }} remaining</strong> 
              in {{ audit_reminder.month_name }} {{ audit_reminder.year }}. Time to prepare for monthly data audits and sanitization.
            </p>
            <div class="mb-2">
              <small class="text-dark">
                <i class="fas fa-check-circle me-1"></i>Review order data accuracy<br>
                <i class="fas fa-check-circle me-1"></i>Clean up duplicate entries<br>
                <i class="fas fa-check-circle me-1"></i>Verify MRN and billing completeness<br>
                <i class="fas fa-check-circle me-1"></i>Update dealer and vehicle information
              </small>
            </div>
          </div>
          <div class="col-md-4 text-end">
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
          </div>
        </div>
      </div>
      {% endif %}

      <div class="text-center mb-5">
        <h1 class="display-4 mb-3">{{ app_settings.site_title|default:"Move People â€• Move Mountains" }}</h1>
        <p class="lead">Daily Operations Dashboard | <strong>{{ current_date|date:"F j, Y" }}</strong></p>
      </div>
      
      <!-- Today's Achievements Section -->
      <div class="row g-4 mb-4">
        <div class="col-12">
          <h4 class="text-center mb-3"><i class="fas fa-trophy text-warning me-2"></i>Today's Achievements</h4>
        </div>
        
        <!-- Orders Entered Card -->
        <div class="col-lg-3 col-md-6">
          <div class="card daily-report-card h-100">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-start">
                <div>
                  <h6 class="card-title text-primary">Orders Entered</h6>
                  <h2 class="display-4 fw-bold text-primary">{{ daily_reports.orders_entered }}</h2>
                  <p class="text-muted mb-0 small">data entry work</p>
                </div>
                <div class="report-icon">
                  <i class="fas fa-keyboard fa-2x text-primary"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- MRN Progress Card -->
        <div class="col-lg-3 col-md-6">
          <div class="card daily-report-card h-100">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-start">
                <div>
                  <h6 class="card-title text-success">MRN Created</h6>
                  <h2 class="display-4 fw-bold text-success">{{ daily_reports.mrn_created }}</h2>
                  <p class="text-muted mb-0 small">workflow progress</p>
                </div>
                <div class="report-icon">
                  <i class="fas fa-clipboard-check fa-2x text-success"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Orders Billed Card -->
        <div class="col-lg-3 col-md-6">
          <div class="card daily-report-card h-100">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-start">
                <div>
                  <h6 class="card-title text-info">Orders Billed</h6>
                  <h2 class="display-4 fw-bold text-info">{{ daily_reports.orders_billed }}</h2>
                  <p class="text-muted mb-0 small">billing completed</p>
                </div>
                <div class="report-icon">
                  <i class="fas fa-file-invoice-dollar fa-2x text-info"></i>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Dealers Served Card -->
        <div class="col-lg-3 col-md-6">
          <div class="card daily-report-card h-100">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-start">
                <div>
                  <h6 class="card-title text-warning">Dealers Served</h6>
                  <h2 class="display-4 fw-bold text-warning">{{ daily_reports.dealers_served }}</h2>
                  <p class="text-muted mb-0 small">customers helped</p>
                </div>
                <div class="report-icon">
                  <i class="fas fa-handshake fa-2x text-warning"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- This Week's Impact Section -->
      <div class="row g-4">
        <div class="col-12">
          <h4 class="text-center mb-3"><i class="fas fa-chart-line text-success me-2"></i>This Week's Impact</h4>
        </div>
        
        <div class="col-lg-4 col-md-6">
          <div class="card weekly-report-card h-100 border-success">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-start">
                <div>
                  <h6 class="card-title text-success">Total Orders Processed</h6>
                  <h3 class="display-5 fw-bold text-success">{{ weekly_reports.orders_entered }}</h3>
                  <p class="text-muted mb-0 small">last 7 days</p>
                </div>
                <div class="report-icon">
                  <i class="fas fa-calendar-week fa-2x text-success"></i>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-lg-4 col-md-6">
          <div class="card weekly-report-card h-100 border-info">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-start">
                <div>
                  <h6 class="card-title text-info">Orders Billed</h6>
                  <h3 class="display-5 fw-bold text-info">{{ weekly_reports.orders_billed }}</h3>
                  <p class="text-muted mb-0 small">billing completed</p>
                </div>
                <div class="report-icon">
                  <i class="fas fa-file-invoice-dollar fa-2x text-info"></i>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-lg-4 col-md-6">
          <div class="card weekly-report-card h-100 border-warning">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-start">
                <div>
                  <h6 class="card-title text-warning">Material Moved</h6>
                  <h3 class="display-5 fw-bold text-warning">{{ weekly_reports.total_quantity }}</h3>
                  <p class="text-muted mb-0 small">MT processed</p>
                </div>
                <div class="report-icon">
                  <i class="fas fa-truck fa-2x text-warning"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Quick Actions -->
      <div class="row mt-5">
        <div class="col-12 text-center">
          <h4 class="mb-4">Quick Actions</h4>
          <div class="d-flex justify-content-center gap-3 flex-wrap">
            <a href="/orders/order-workflow/" class="btn btn-primary btn-lg">
              <i class="fas fa-plus me-2"></i>Create New Order
            </a>
            <a href="/orders/orders/" class="btn btn-outline-secondary btn-lg">
              <i class="fas fa-list me-2"></i>View Orders
            </a>
            <a href="/orders/analytics/" class="btn btn-outline-info btn-lg">
              <i class="fas fa-chart-bar me-2"></i>Analytics
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
